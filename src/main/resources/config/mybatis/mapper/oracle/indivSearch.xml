<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="config.mybatis.mapper.oracle.indivSearch">

	<!-- 키워드 검색 -->
	<select id="selectIndivKeyword" parameterType="String" resultType="indivKeywordSearchVo">
		select r.*, c.CORP_NAME, c.CORP_IMGURL, l.LANGUAGE_NAME, w.WORKKIND_NAME, 
			a.AREA_ADD1, a.AREA_ADD2
		from RECRUITANNOUNCE r join CORP c
		on r.user_no=c.user_no
		join LANGUAGE l
		on r.LANGUAGE_NO=l.LANGUAGE_NO
		join WORKKIND w
		on r.WORKKIND_NO = w.WORKKIND_NO
		join AREALIST a
		on r.AREALIST_NO = a.AREA_NO
		where (CORP_NAME like '%'|| #{keyword} ||'%' OR
			LANGUAGE_NAME like '%'|| #{keyword} ||'%' OR
			WORKKIND_NAME like '%'|| #{keyword} ||'%')
		<![CDATA[
		and RECRUITANNOUNCE_ENDDATE>=sysdate
		]]>
		order by RECRUITANNOUNCE_ENDDATE
	</select>
	
	<!-- 언어 검색 -->
	<select id="selectIndivLanguage" parameterType="int" resultType="indivKeywordSearchVo">
		select r.*, c.CORP_NAME, c.CORP_IMGURL, l.LANGUAGE_NAME, w.WORKKIND_NAME, a.AREA_ADD1, a.AREA_ADD2
		from RECRUITANNOUNCE r join CORP c
		on r.user_no=c.user_no
		join LANGUAGE l
		on r.LANGUAGE_NO=l.LANGUAGE_NO
		join WORKKIND w
		on r.WORKKIND_NO = w.WORKKIND_NO
		join AREALIST a
		on r.AREALIST_NO = a.AREA_NO
		where r.LANGUAGE_NO=#{languageNo}
		<![CDATA[
		and RECRUITANNOUNCE_ENDDATE>=sysdate
		]]>
		order by RECRUITANNOUNCE_ENDDATE
	</select>
	
	<!-- 언어목록 -->
	<select id="selectLanguage" resultType="languageVo">
		select * from language order by LANGUAGE_NO
	</select>
	
	<!-- 전체 -->
	<select id="selectSearchAll" resultType="indivKeywordSearchVo">
		select r.*, c.CORP_NAME, c.CORP_IMGURL, l.LANGUAGE_NAME, w.WORKKIND_NAME, a.AREA_ADD1, a.AREA_ADD2
		from RECRUITANNOUNCE r join CORP c
		on r.user_no=c.user_no
		join LANGUAGE l
		on r.LANGUAGE_NO=l.LANGUAGE_NO
		join WORKKIND w
		on r.WORKKIND_NO = w.WORKKIND_NO
		join AREALIST a
		on r.AREALIST_NO = a.AREA_NO
		<![CDATA[
		and RECRUITANNOUNCE_ENDDATE>=sysdate
		]]>
		order by RECRUITANNOUNCE_ENDDATE
	</select>

</mapper>
