<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="config.mybatis.mapper.oracle.applicant">

	<select id="selectByUserNo" parameterType="int" resultType="applicantlistVo">
		select * from APPLICANTLIST where USER_NO=#{userNo}
	</select>
	
	<!-- 지원완료 수 (check 3일때) -->
	<select id="selectApplyCountByUserNo" parameterType="int" resultType="int">
		select count(*)
		from APPLICANTLIST
		where APPLICANTLIST_PAPERCHECK=3 and USER_NO=#{userNo}
	</select>
	
	<!-- 서류합격 수 (check 1일때) -->
	<select id="selectPassCountByUserNo" parameterType="int" resultType="int">
		select count(*)
		from APPLICANTLIST
		where APPLICANTLIST_PAPERCHECK=1 and USER_NO=#{userNo}
	</select>
	
	<!-- 불합격 수 (check 2일때) -->
	<select id="selectFailCountByUserNo" parameterType="int" resultType="int">
		select count(*)
		from APPLICANTLIST
		where APPLICANTLIST_PAPERCHECK=2 and USER_NO=#{userNo}
	</select>

	<!-- 지원완료 목록 -->
<!-- 	<select id="selectApplyAllByUserNo" parameterType="int" resultType="applicantlistVo">
		select a.*, r.RECRUITANNOUNCE_TITLE, r.RECRUITANNOUNCE_SWORKKIND, r.RECRUITANNOUNCE_SPAY
		from APPLICANTLIST a join RECRUITANNOUNCE r
		on a.RECRUITANNOUNCE_NO=r.RECRUITANNOUNCE_NO
		where APPLICANTLIST_PAPERCHECK=3 and a.USER_NO=#{userNo}
		order by APPLICANTLIST_NO desc
	</select> -->
	
	<select id="selectApplyAllByUserNo" parameterType="indivpagingVo" resultType="applicantlistVo">
		select *
		from
		(
		    select A.*, rownum as RNUM
		    from
		    (
		        		select a.*, r.RECRUITANNOUNCE_TITLE, r.RECRUITANNOUNCE_SWORKKIND, r.RECRUITANNOUNCE_SPAY
                        from APPLICANTLIST a join RECRUITANNOUNCE r
                        on a.RECRUITANNOUNCE_NO=r.RECRUITANNOUNCE_NO
                        where APPLICANTLIST_PAPERCHECK=3 and a.USER_NO=${userNo}
                        order by APPLICANTLIST_NO desc
		    )A
		)
		<![CDATA[
		where RNUM > #{firstRecordIndex} 
		and RNUM <= #{firstRecordIndex} + #{recordCountPerPage}
		]]>
	</select>
	
	<!-- 서류합격 목록 -->
<!-- 	<select id="selectPassAllByUserNo" parameterType="int" resultType="applicantlistVo">
		select a.*, r.RECRUITANNOUNCE_TITLE, r.RECRUITANNOUNCE_SWORKKIND, r.RECRUITANNOUNCE_SPAY
		from APPLICANTLIST a join RECRUITANNOUNCE r
		on a.RECRUITANNOUNCE_NO=r.RECRUITANNOUNCE_NO
		where APPLICANTLIST_PAPERCHECK=1 and a.USER_NO=#{userNo}
		order by APPLICANTLIST_NO desc
	</select> -->
	
	<select id="selectPassAllByUserNo" parameterType="indivpagingVo" resultType="applicantlistVo">
		select *
		from
		(
		    select A.*, rownum as RNUM
		    from
		    (
		        		select a.*, r.RECRUITANNOUNCE_TITLE, r.RECRUITANNOUNCE_SWORKKIND, r.RECRUITANNOUNCE_SPAY
                        from APPLICANTLIST a join RECRUITANNOUNCE r
                        on a.RECRUITANNOUNCE_NO=r.RECRUITANNOUNCE_NO
                        where APPLICANTLIST_PAPERCHECK=1 and a.USER_NO=${userNo}
                        order by APPLICANTLIST_NO desc
		    )A
		)
		<![CDATA[
		where RNUM > #{firstRecordIndex} 
		and RNUM <= #{firstRecordIndex} + #{recordCountPerPage}
		]]>
	</select>
	
	<!-- 불합격 목록 -->
<!-- 	<select id="selectFailAllByUserNo" parameterType="int" resultType="applicantlistVo">
		select a.*, r.RECRUITANNOUNCE_TITLE, r.RECRUITANNOUNCE_SWORKKIND, r.RECRUITANNOUNCE_SPAY
		from APPLICANTLIST a join RECRUITANNOUNCE r
		on a.RECRUITANNOUNCE_NO=r.RECRUITANNOUNCE_NO
		where APPLICANTLIST_PAPERCHECK=2 and a.USER_NO=#{userNo}
		order by APPLICANTLIST_NO desc
	</select> -->
	
	<select id="selectFailAllByUserNo" parameterType="indivpagingVo" resultType="applicantlistVo">
		select *
		from
		(
		    select A.*, rownum as RNUM
		    from
		    (
		        		select a.*, r.RECRUITANNOUNCE_TITLE, r.RECRUITANNOUNCE_SWORKKIND, r.RECRUITANNOUNCE_SPAY
                        from APPLICANTLIST a join RECRUITANNOUNCE r
                        on a.RECRUITANNOUNCE_NO=r.RECRUITANNOUNCE_NO
                        where APPLICANTLIST_PAPERCHECK=2 and a.USER_NO=${userNo}
                        order by APPLICANTLIST_NO desc
		    )A
		)
		<![CDATA[
		where RNUM > #{firstRecordIndex} 
		and RNUM <= #{firstRecordIndex} + #{recordCountPerPage}
		]]>
	</select>
</mapper>
