<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="config.mybatis.mapper.oracle.recruitannounce">

	<select id="recruitannouncedetail" parameterType="int" resultType="RecruitannounceVO">
		select * from RECRUITANNOUNCE where RECRUITANNOUNCE_NO=#{recruitannounceNo}
	</select>
	
	
	<select id="recruitcorpwantwork" parameterType="int" resultType="String">
		select WORKKIND_NAME from WORKKIND where WORKKIND_NO=(select WORKKIND_NO from RECRUITANNOUNCE where RECRUITANNOUNCE_NO=#{recruitannounceNo})
	</select>
	
	<select id="recruitcorpwantedarea1" parameterType="int" resultType="String">
		select AREA_ADD1 from AREALIST where AREA_NO = (select AREALIST_NO from RECRUITANNOUNCE where RECRUITANNOUNCE_NO=#{recruitannounceNo})
	</select>
	
	<select id="recruitcorpwantedarea2" parameterType="int" resultType="String">
		select AREA_ADD2 from AREALIST where AREA_NO = (select AREALIST_NO from RECRUITANNOUNCE where RECRUITANNOUNCE_NO=#{recruitannounceNo})
	</select>
	
	<select id="recruitcorpwantedlanguage" parameterType="int" resultType="String">
		select LANGUAGE_NAME from LANGUAGE where LANGUAGE_NO = (select LANGUAGE_NO from RECRUITANNOUNCE where RECRUITANNOUNCE_NO=#{recruitannounceNo})
	</select>
	
	<select id="selectRecruitList" parameterType="int" resultType="RecruitannounceVO">
		select r.*
		from (select * from recruitAnnounce where user_no=#{userNo} order by RECRUITANNOUNCE_NO desc)r
		<![CDATA[
			where rownum<4
		]]>
	</select>
	
	<delete id="recruitdelete" parameterType="int">
		delete from RECRUITANNOUNCE 
		where RECRUITANNOUNCE_NO=#{recruitannounceNo}
	</delete>
	
	<select id="selectcwlanguage" resultType="LanguageVO">
		select language_no, language_name from language
	</select>
	
	<select id="selectcwplace" resultType="arealistVO">
		select area_no, area_add1, area_add2 from arealist
	</select>
	
	<insert id="recruitannouncewrite" parameterType="RecruitannounceVO">
		insert into recruitannounce 
		values(recruitannounce_seq.nextval,#{userNo},#{workkindNo},#{arealistNo},#{languageNo},#{recruitannounceTitle},
			sysdate,#{recruitannounceEnddate},#{recruitannounceScarrer},#{recruitannounceSworkkind},#{recruitannounceSpay},#{recruitannounceSkill},
			#{recruitannounceWorkkind},#{recruitannounceWork},#{recruitannounceWantedcarrer},#{recruitannounceUpcheckcarrer},#{recruitannounceHirestep},
			#{recruitannounceElse},1,1,#{recruitannounceLink})
	</insert>
	
	<update id="recruitannounceedit" parameterType="RecruitannounceVO">
		update recruitannounce 
		set WORKKIND_NO=#{workkindNo}, AREALIST_NO=#{arealistNo}, LANGUAGE_NO=#{languageNo}, RECRUITANNOUNCE_TITLE=#{recruitannounceTitle},
		 RECRUITANNOUNCE_ENDDATE=#{recruitannounceEnddate}, RECRUITANNOUNCE_SCARRER=#{recruitannounceScarrer}, RECRUITANNOUNCE_SWORKKIND=#{recruitannounceSworkkind}, 
		 RECRUITANNOUNCE_SPAY=#{recruitannounceSpay}, RECRUITANNOUNCE_SKILL=#{recruitannounceSkill}, RECRUITANNOUNCE_WORKKIND=#{recruitannounceWorkkind},
		 RECRUITANNOUNCE_WORK=#{recruitannounceWork}, RECRUITANNOUNCE_WANTEDCARRER=#{recruitannounceWantedcarrer}, RECRUITANNOUNCE_UPCHECKCARRER=#{recruitannounceUpcheckcarrer}, 
		 RECRUITANNOUNCE_HIRESTEP=#{recruitannounceHirestep},RECRUITANNOUNCE_ELSE=#{recruitannounceElse},
		 RECRUITANNOUNCE_LINK=#{recruitannounceLink}, RECRUITANNOUNCE_UPCHECK=4 
		 where RECRUITANNOUNCE_NO=#{recruitannounceNo}
	</update>
	
</mapper>