<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mybatis.mapper.message">
	<insert id="insertMessage" parameterType="messageVo">
		<selectKey keyProperty="messageNo" resultType="int" order="BEFORE">
			select message_seq.nextval from dual
		</selectKey>
		insert into message(MESSAGE_NO, MESSAGE_TITLE, MESSAGE_CONTENT, USER_NO)
		values(#{messageNo}, #{messageTitle}, #{messageContent}, #{userNo})
	</insert>
	
	<insert id="insertGetMessage" parameterType="getMessageVo">
		<selectKey keyProperty="getMessageNo" resultType="int" order="BEFORE">
			select getmessage_seq.nextval from dual
		</selectKey>
		insert into getMessage(GETMESSAGE_NO, USER_NO, MESSAGE_NO)
		values(#{getMessageNo}, #{userNo}, #{messageNo})
	</insert>
	
	<select id="selectSentMessage" parameterType="int" resultType="messageVo">
		select * from message where USER_NO=#{userNo} order by MESSAGE_NO desc
	</select>
	
	<select id="selectByMessageNo" parameterType="int" resultType="messageVo">
		select * from message where MESSAGE_NO=#{messageNo}
	</select>	
</mapper>









